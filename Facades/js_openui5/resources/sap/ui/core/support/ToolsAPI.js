/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/core/library','sap/ui/Global','sap/ui/core/Core','sap/ui/core/ElementMetadata',"sap/base/util/LoaderExtensions","sap/base/util/UriParameters"],function(l,G,C,E,L,U){'use strict';var c=sap.ui.getCore().getConfiguration();function _(){var f=G.versioninfo?G.versioninfo.libraries:undefined;var g=Object.create(null);if(f!==undefined){f.forEach(function(h,i,j){g[h.name]=h.version;});}return g;}function a(){var f=sap.ui.getCore().getLoadedLibraries();var g=Object.create(null);Object.keys(sap.ui.getCore().getLoadedLibraries()).forEach(function(h,i,j){g[h]=f[h].version;});return g;}function b(){return{commonInformation:{version:G.version,buildTime:G.buildinfo.buildtime,lastChange:G.buildinfo.lastchange,jquery:jQuery.fn.jquery,userAgent:navigator.userAgent,applicationHREF:window.location.href,documentTitle:document.title,documentMode:document.documentMode||'',debugMode:jQuery.sap.debug(),statistics:jQuery.sap.statistics()},configurationBootstrap:window['sap-ui-config']||Object.create(null),configurationComputed:{theme:c.getTheme(),language:c.getLanguage(),formatLocale:c.getFormatLocale(),accessibility:c.getAccessibility(),animation:c.getAnimation(),rtl:c.getRTL(),debug:c.getDebug(),inspect:c.getInspect(),originInfo:c.getOriginInfo(),noDuplicateIds:c.getNoDuplicateIds()},libraries:_(),loadedLibraries:a(),loadedModules:L.getAllRequiredModules().sort(),URLParameters:new U(window.location.href).mParams};}var d={_createRenderedTreeModel:function(n,r){var f=n;var g=f.firstElementChild;var h=r;var s=h;var i=sap.ui.getCore().byId(f.id);if(f.getAttribute('data-sap-ui')&&i){h.push({id:i.getId(),name:i.getMetadata().getName(),type:'sap-ui-control',content:[]});s=h[h.length-1].content;}else if(f.getAttribute('data-sap-ui-area')){h.push({id:f.id,name:'sap-ui-area',type:'data-sap-ui',content:[]});s=h[h.length-1].content;}while(g){this._createRenderedTreeModel(g,s);g=g.nextElementSibling;}}};var e={_getOwnProperties:function(f){var r=Object.create(null);var g=f.getMetadata().getProperties();r.meta=Object.create(null);r.meta.controlName=f.getMetadata().getName();r.properties=Object.create(null);Object.keys(g).forEach(function(k){r.properties[k]=Object.create(null);r.properties[k].value=f.getProperty(k);r.properties[k].type=g[k].getType().getName?g[k].getType().getName():'';});return r;},_copyInheritedProperties:function(f,i){var g=i.getProperties();var r=Object.create(null);r.meta=Object.create(null);r.meta.controlName=i.getName();r.properties=Object.create(null);Object.keys(g).forEach(function(k){r.properties[k]=Object.create(null);r.properties[k].value=g[k].get(f);r.properties[k].type=g[k].getType().getName?g[k].getType().getName():'';});return r;},_getInheritedProperties:function(f){var r=[];var i=f.getMetadata().getParent();while(i instanceof E){r.push(this._copyInheritedProperties(f,i));i=i.getParent();}return r;},_getProperties:function(f){var g=sap.ui.getCore().byId(f);var p=Object.create(null);if(g){p.own=this._getOwnProperties(g);p.inherited=this._getInheritedProperties(g);}return p;},_getModelFromContext:function(f,g){var h=f.getBinding(g);var j=h.getModel();var k=(f.getBindingInfo(g).parts)?f.getBindingInfo(g).parts:[];var m=[];for(var i=0;i<k.length;i++){m.push(k[i].model);}var n={names:m,path:h.getPath()};if(j){n.mode=j.getDefaultBindingMode();n.type=j.getMetadata().getName();n.data=j.getData?j.getData('/'):undefined;}return n;},_getBindDataForProperties:function(f){var p=f.getMetadata().getAllProperties();var g=Object.create(null);for(var k in p){if(p.hasOwnProperty(k)&&f.getBinding(k)){g[k]=Object.create(null);g[k].path=f.getBinding(k).getPath();g[k].value=f.getBinding(k).getValue();g[k].type=f.getMetadata().getProperty(k).getType().getName?f.getMetadata().getProperty(k).getType().getName():'';g[k].mode=f.getBinding(k).getBindingMode();g[k].model=this._getModelFromContext(f,k);}}return g;},_getBindDataForAggregations:function(f){var g=f.getMetadata().getAllAggregations();var h=Object.create(null);for(var k in g){if(g.hasOwnProperty(k)&&f.getBinding(k)){h[k]=Object.create(null);h[k].model=this._getModelFromContext(f,k);}}return h;}};return{getFrameworkInformation:b,getRenderedControlTree:function(){var r=[];d._createRenderedTreeModel(document.body,r);return r;},getControlProperties:function(f){return e._getProperties(f);},getControlBindings:function(f){var r=Object.create(null);var g=sap.ui.getCore().byId(f);var h;if(!g){return r;}h=g.getBindingContext();r.meta=Object.create(null);r.contextPath=h?h.getPath():null;r.aggregations=e._getBindDataForAggregations(g);r.properties=e._getBindDataForProperties(g);return r;}};});
