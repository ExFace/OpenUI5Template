/*
 * ! OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/DefaultVariant","sap/ui/fl/StandardVariant","sap/ui/fl/ChangePersistenceFactory","sap/ui/fl/registry/Settings","sap/ui/fl/Utils"],function(D,S,C,a,U){"use strict";var b={PERSISTENCY_KEY:"persistencyKey",loadChanges:function(c){var A=U.getAppDescriptor(c);var s=U.getSiteId(c);var d=this.getStableId(c);var p={appDescriptor:A,siteId:s,includeVariants:true};var o=C.getChangePersistenceForControl(c);return o.getChangesForVariant(this.PERSISTENCY_KEY,d,p);},getChangeById:function(c,i){if(!i||!c){U.log.error("sId or oControl is not defined");return undefined;}var o=this.getChangeMap(c);return o[i];},isVariantSharingEnabled:function(){return a.getInstance().then(function(i){return i.isVariantSharingEnabled();});},getComponentClassName:function(c){return U.getComponentClassName(c);},getComponentForControl:function(c){return U.getComponentForControl(c);},isApplicationVariant:function(c){return U.isApplicationVariant(c);},isVendorLayer:function(){return U.isVendorLayer();},isVariantDownport:function(){return b.isVendorLayer()&&U.isHotfixMode();},getDefaultVariantId:function(c){var o=this.getChangeMap(c);return D.getDefaultVariantId(o);},getExecuteOnSelect:function(c){var o=this.getChangeMap(c);return S.getExecuteOnSelect(o);},getStableId:function(c){if(!c){return undefined;}var s;try{s=c.getPersistencyKey();}catch(e){s="";}return s;},getChangeMap:function(c){var o=C.getChangePersistenceForControl(c);var s=b.getStableId(c);return o.getSmartVariantManagementChangeMap()[s]||{};}};return b;},true);
