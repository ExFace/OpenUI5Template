/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/integration/designtime/baseEditor/propertyEditor/BasePropertyEditor","sap/base/util/deepClone","sap/ui/core/Fragment","sap/base/util/restricted/_merge"],function(B,d,F,_){"use strict";var A=B.extend("sap.ui.integration.designtime.baseEditor.propertyEditor.arrayEditor.ArrayEditor",{metadata:{events:{"ready":{}}},constructor:function(){B.prototype.constructor.apply(this,arguments);F.load({name:"sap.ui.integration.designtime.baseEditor.propertyEditor.arrayEditor.ArrayEditor",controller:this}).then(function(c){this.addContent(c);this.fireReady();}.bind(this));},onValueChange:function(){var r=B.prototype.onValueChange.apply(this,arguments);var c=this.getConfig();if(c.value&&c.template){c.items=[];c.value.forEach(function(v,i){var I={itemLabel:c.itemLabel||"{i18n>BASE_EDITOR.ARRAY.ITEM_LABEL}",index:i,properties:Object.keys(c.template).map(function(k){var t=c.template[k];return _({},t,{path:c.path+"/"+i+"/"+t.path});})};c.items.push(I);});this.getModel().checkUpdate();}return r;},_removeItem:function(e){var i=e.getSource().data("index");var v=this.getModel("_context").getProperty("/"+this.getConfig().path).slice();v.splice(i,1);this.firePropertyChange(v);},_addItem:function(){var c=this.getConfig();var v=(this.getModel("_context").getProperty("/"+c.path)||[]).slice();var D={};Object.keys(c.template).forEach(function(k){var a=c.template[k].defaultValue;if(c.template[k].hasOwnProperty("defaultValue")){D[k]=d(a);}});v.push(D);this.firePropertyChange(v);},renderer:B.getMetadata().getRenderer().render});return A;});
